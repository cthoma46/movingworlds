// Generated by CoffeeScript 1.4.0
var addTag, multiTag;

$(document).ready(function() {
  $('#edit_profile').click(function(e) {
    e.preventDefault();
    $(this).hide();
    $('#profile_form').show();
    $('#profile_info').hide();
    return $('#upload_form').show();
  });
  $('#cancel_profile').click(function(e) {
    e.preventDefault();
    $('#profile_form').hide();
    $('#profile_info').show();
    $('#edit_profile').show();
    return $('#upload_form').hide();
  });
  $(".datepicker input").datepicker({
    showOn: "both",
    changeMonth: true,
    changeYear: true,
    buttonImage: "/images/btn_datepicker.png",
    buttonImageOnly: true
  });
  $('.tags').tagit({
    availableTags: ["Option 1", "Option 2", "Option 3", "Option 4"],
    create: function(event, ui) {},
    onTagAdded: function(event, tag) {}
  });
  $('#impact').val($('#impact_value').val());
  $('#industry').val($('#industry_value').val());
  $('.change_status').click(function(e) {
    var status;
    e.preventDefault();
    status = $(this).data('status');
    return $.doPost('/experteer/update', {
      status: status
    });
  });
  $(".combobox").combobox({});
  return multiTag('#areas', 'area_support');
});

multiTag = function(container, type) {
  var values;
  if ($('#' + type + "_values")) {
    values = $('#' + type + "_values").val();
    if (typeof values !== 'undefined') {
      if (typeof values !== '') {
        values = JSON.parse(values);
      }
      Object.keys(values).forEach(function(v) {
        return addTag(container, type, v, values[v]);
      });
    }
  }
  return $("#add_" + type).click(function(e) {
    var label, value;
    e.preventDefault();
    value = $('#' + type).val();
    label = $('#' + type + ' option:selected').text();
    return addTag(container, type, value, label);
  });
};

addTag = function(container, type, value, label) {
  var option;
  if (value !== '' && $("input[name='" + type + "'][value='" + value + "']").length === 0 && $("input[name='" + type + "']").length < 6) {
    option = "<p class='tagit-choice'><span class='tagit-label'>" + label + "</span><a class='close'><span class='text-icon'>Ã—</span><span class='ui-icon ui-icon-close'></span></a><input type='hidden' name='" + type + "' value='" + value + "' /></p>";
    $(container).append(option);
    $('#' + type).next().find('input').val("");
    return $("p.tagit-choice .close").click(function(e) {
      e.preventDefault();
      return $(this).parent().remove();
    });
  }
};
