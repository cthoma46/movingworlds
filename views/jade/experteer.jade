extends layouts/layout

block append scripts
	if mine
		script(src='/javascript/plugins/jquery-ui.min.js')
		script(src='/javascript/plugins/jquery.validate.min.js')
		script(src='/javascript/plugins/jquery.jeditable.js')
		script(src='/javascript/experteer.js')

block content
	div.layout_960
		aside#personal_details.col1of2
			div.widget.experteer
				header
					div.icon
					h3= experteer.fullName()
				section.widget_body
					div.avatar
						.av_img_container
							if experteer.avatar || experteer.type
								img(src= experteer.avatar || "/images/icn_avatar_"+experteer.type+".png", width="80", height="80")
							if experteer.verified
								div.verified
					ul
						li
							strong Location &nbsp;
							= experteer.city+", "+experteer.country
						if experteer.birthday
							li
								strong Age&nbsp;
								=experteer.age()
						if experteer.gender
							li
								strong Gender&nbsp;
								=experteer.interpretGender()
						if experteer.experience && experteer.experience > 0
							li
								strong Experience&nbsp;
								| #{experteer.experience} years
					if mine
						nav
							ul
								li
									a(href="/settings").chunky_btn Edit my Profile
			div.detail.clearfix
				nav.credentials.clearfix
					//-ul
						li
							a.friends_btn(href="/explore") 101
								span Friends
						li
							a.invited_btn(href="/explore") 5
								span invited
							- if(typeof experteer.invite.invited_by !== 'undefined')
								li.invited_by
									span invited by
									a(href="#")= experteer.invite.invited_by
				nav.profile_links
					ul
						if experteer.links
							each link, key in experteer.links
								-var display = (key == 'url') ? link : key
								if link !== ''
									li
										a(href=link, class=key+'_link', )= display

			if experteer.bio && experteer.bio.length > 0
				div.detail
					h4 Biography
					=experteer.bio

			if experteer.education && experteer.education.length > 0
				div.detail
					h4 Education
					each edu in experteer.education
						ul
							li
								strong= edu.school
							li= edu.degree+" "+edu.major
							if edu.start && edu.end
								li= edu.start.getFullYear()+" to "+edu.end.getFullYear();

			if experteer.employment && experteer.employment.length > 0
				div.detail
					h4 Employment History
					each emp in experteer.employment
						ul
							li
								strong= emp.title
							li= emp.employer
							if emp.start && emp.end
								li= emp.start.getFullYear()+" to "+emp.end.getFullYear();

			if experteer.languages && experteer.languages.length
				div.detail
					h4 Languages
					ul
						each lang in experteer.languages
							li= lang

			//- if experteer.lived && experteer.lived.length
				div.detail
					h4 Lived
					=experteer.lived.join(', ');

			if experteer.visited && experteer.visited.length > 0
				div.detail
					h4 Countries Visited
					=experteer.visited.join(', ');

			if experteer.skills && experteer.skills.length > 0
				div.detail
					h4 Skills
					=experteer.skills.join(', ');

		// Experteering Profile
		div#exp_profile.col2of2
			section.status_bar
				-var status = experteer.interpretStatus();
				div(class="status "+status.class)= status.label
				nav
					if mine
						ul
							li
								a Change your status
							//-li
								a.smooth_btn.red Favorite
					else
						ul
							li
								a.smooth_btn.green Request Intro
							//-li
								a.smooth_btn.red Favorite
			section.stack_630
				header
					if experteer.headline
						h2.experteering_icon= experteer.headline
					else
						h2.experteering_icon Your experteer profile
					if experteer.profile.video
						div.profile_video
							div.video_container!= youtube.embed(extractYoutubeId(experteer.profile.video), 558, 314);
				div.stack_body.clearfix
					if mine
						div.col1of2
								h4 Availablity
								p!= moment( experteer.profile.availability.start ).format('MMMM D, YYYY')+" <em>to</em> "+moment( experteer.profile.availability.end ).format('MMMM D, YYYY')

								div.profile_area
									- var editable_class = experteer.profile.motivation? "" : "editable_empty"
									- var title_class = experteer.profile.motivation? "" : "error"
									h4(class=title_class) Motivation

									div(class=editable_class).editable_area
										if experteer.profile.motivation
											= experteer.profile.motivation
										else
											| What's your motivation?
							div.col2of2
								div
									- var editable_class = experteer.profile.field? "" : "editable_empty"
									- var title_class = experteer.profile.field? "" : "error"
									h4(class=title_class) Field

									div(class=editable_class).editable
										if experteer.profile.field
											= experteer.profile.field
										else
											| What's your field?
								h4 Regions of Interest
								h4 Value
								div
									- var editable_class = experteer.profile.industry? "" : "editable_empty"
									- var title_class = experteer.profile.industry? "" : "error"
									h4(class=title_class) Industry

									div(class=editable_class).editable
										if experteer.profile.industry
											= experteer.profile.industry
										else
											| What's your industry?
					else
						div.col1of2
								h4 Availablity
								p
								h4 Motivation
								p= experteer.profile.motivation
								h4 Personal Learning Goals
								p= experteer.profile.goals.join(', ')
						div.col2of2
								h4 Field
								p= experteer.profile.field
								h4 Regions of Interest
								p= experteer.profile.countries.join(', ')
								h4 Value
								p= "$" + experteer.profile.value + " per hour"
								h4 Industry
								p= experteer.profile.industry.join(', ')
				footer